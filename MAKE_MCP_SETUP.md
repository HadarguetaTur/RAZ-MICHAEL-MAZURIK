# הגדרת Make MCP Server ב-Cursor

## סקירה כללית

המדריך הזה מסביר איך להגדיר את Make MCP Server ב-Cursor כדי לאפשר הרצת סצנריוס Make on-demand ישירות דרך ה-AI assistant.

## מה זה Make MCP Server?

Make MCP Server הוא שרת Model Context Protocol שמחבר את Cursor לחשבון Make שלך, ומאפשר ל-AI assistant להריץ סצנריוס Make אוטומטית.

## דרישות מוקדמות

- ✅ חשבון Make פעיל (תוכנית בתשלום)
- ✅ Make API Token עם הרשאות `scenarios:read` ו-`scenarios:run`
- ✅ Node.js מותקן (נדרש ל-npx)
- ✅ Cursor עם תמיכה ב-MCP

## פרטי החיבור

הפרטים הבאים כבר מוגדרים בקובץ התצורה:

- **Make API Token**: נמצא ב-`.env.local`
- **Organization ID**: `4871458`
- **Zone**: `eu1.make.com` (אירופה)

## הגדרה

### שלב 1: בדיקת קובץ התצורה

**קובץ התצורה ייחודי לפרויקט:**
```
[תיקיית הפרויקט]\.cursor\mcp.json
```

או דרך: **Cursor Settings → Features → MCP Servers**

**הערה:** הקובץ נמצא בתיקיית הפרויקט, כך שכל פרויקט יכול להגדיר חיבור MCP משלו.

### שלב 2: תוכן הקובץ

הקובץ צריך להכיל את ההגדרות הבאות:

```json
{
  "mcpServers": {
    "make": {
      "command": "npx",
      "args": ["-y", "@makehq/mcp-server"],
      "env": {
        "MAKE_API_KEY": "a3307169-fdb6-4b8e-893d-c0af644c120e",
        "MAKE_ZONE": "eu1.make.com",
        "MAKE_TEAM": "4871458"
      }
    }
  }
}
```

**הערות:**
- החבילה `@makehq/mcp-server` תותקן אוטומטית בעת הרצה (דרך npx)
- ה-API token נמצא ב-`.env.local` - לא לשתף בקוד או ב-git
- `MAKE_ZONE` צריך להיות רק הדומיין ללא `https://` או `/api/v1`

### שלב 3: הפעלה מחדש

לאחר הגדרת הקובץ:
1. סגור את Cursor לחלוטין
2. פתח מחדש את Cursor
3. ה-MCP Server יתחיל לעבוד אוטומטית

## בדיקת החיבור

לאחר הפעלה מחדש של Cursor, תוכל לבדוק שהחיבור עובד:

1. **הפעל מחדש את Cursor** - זה קריטי! סגור לחלוטין ופתח מחדש
2. פתח שיחה עם ה-AI assistant
3. בקש: "רשום לי את כל הסצנריוס Make הזמינים"
4. או: "הרץ את סצנריו [שם הסצנריו] עם הפרמטרים..."

**אם החיבור לא עובד:**

1. **ודא ש-Cursor הופעל מחדש לחלוטין** - סגור את כל החלונות כולל תהליכי רקע
2. **בדוק את Console של Cursor לשגיאות:**
   - Help → Toggle Developer Tools
   - לחפש שגיאות ב-Console או ב-Network tab
3. **ודא ש-Node.js מותקן** - צריך גרסה 18+ (נבדק: ✅ v22.18.0)
4. **ודא שה-npx עובד** - נבדק: ✅ עובד
5. **בדוק שהחבילה נגישה:**
   ```bash
   npx -y @makehq/mcp-server
   ```
   אם זה עובד, החבילה תקינה והבעיה היא בטעינת Cursor
6. **נסה לבדוק את קובץ התצורה:**
   - ודא שהקובץ נמצא במיקום הנכון
   - ודא שהתחביר JSON תקין (ללא פסיקים מיותרים)
   - ודא שכל השדות הנדרשים קיימים
7. **אם עדיין לא עובד:**
   - נסה להסיר את ההגדרה ולחזור להוסיף אותה דרך **Cursor Settings → Features → MCP Servers** (דרך ה-UI במקום קובץ ידני)
   - בדוק אם יש עדכונים ל-Cursor
   - נסה לשנות את שם השרת מ-"make" למשהו אחר (למשל "makecom")
   - ודא שאין שגיאות ב-Console של Cursor (Help → Toggle Developer Tools → Console)

**הערה חשובה:** אם ההגדרה דרך קובץ לא עובדת, נסי להגדיר דרך ה-UI של Cursor:
1. פתחי Cursor Settings (Ctrl+,)
2. לחצי על Features
3. מצאי את MCP Servers
4. הוסיפי שרת חדש דרך ה-UI במקום לערוך את הקובץ ידנית

## שימוש

### הרצת סצנריו

אתה יכול לבקש מה-AI להריץ סצנריו Make ישירות:

```
הרץ את סצנריו "שליחת התראה" עם הפרמטרים:
- הודעה: "שיעור מתחיל בעוד שעה"
- טלפון: "0501234567"
```

### רשימת סצנריוס זמינים

```
איזה סצנריוס Make יש לי זמינים?
```

### בדיקת פרמטרים של סצנריו

```
מה הפרמטרים שצריך לספק לסצנריו "יצירת שיעור"?
```

## הערות חשובות

### סצנריוס זמינים

רק סצנריוס שמוגדרים כ-**"on-demand"** יהיו זמינים להרצה דרך ה-MCP.

כדי להפוך סצנריו ל-on-demand:
1. פתח את הסצנריו ב-Make
2. לחץ על ההגדרות (Settings)
3. שנה את ה-Schedule ל-"On-demand"
4. שמור את הסצנריו

### אבטחה

**מיקום הקובץ:**
- הקובץ `mcp.json` נמצא ב-`[תיקיית הפרויקט]\.cursor\mcp.json`
- זה **ייחודי לפרויקט** - כל פרויקט יכול להגדיר חיבור MCP משלו
- הקובץ **לא חלק מה-git repository** (מוגן ב-`.gitignore`)

**הגנה:**
- ✅ הקובץ בתיקיית `.cursor` שמוגנת ב-`.gitignore` (`.cursor/*`)
- ✅ הקובץ לא יעלה ל-git - מוגן אוטומטית
- ✅ ה-API token רגיש - לא לשתף בקוד או ב-git
- ✅ הקובץ `.env.local` כבר ב-`.gitignore`

**הערות חשובות:**
- הקובץ `mcp.json` הוא **ייחודי לפרויקט** - כל פרויקט יכול להגדיר token שונה
- אם את משתפת את הפרויקט עם אחרים, הם יצטרכו ליצור קובץ `mcp.json` משלהם עם ה-token שלהם
- הקובץ לא יעלה ל-git, כך שכל מפתח צריך להגדיר את ה-token שלו מקומית

### הרשאות

ה-API token צריך להכיל את ההרשאות הבאות:
- ✅ `scenarios:read` - לקריאת רשימת סצנריוס (נבדק ב-Make)
- ✅ `scenarios:run` - להרצת סצנריוס (נבדק ב-Make)
- ✅ `mcp:use` - לשימוש ב-MCP (נבדק ב-Make)
- ✅ `mcp-vhosts:read` / `mcp-vhosts:write` - לניהול MCP vhosts (נבדק ב-Make)

**✅ כל ההרשאות קיימות ב-token `raz_token`**

### פתרון בעיות

**החיבור לא עובד:**
1. בדוק שה-API token נכון
2. בדוק שה-Organization ID נכון
3. בדוק שה-Zone נכון (`eu1.make.com` או `us1.make.com`)
4. הפעל מחדש את Cursor

**סצנריו לא מופיע ברשימה:**
- ודא שהסצנריו מוגדר כ-"on-demand"
- ודא שהסצנריו פעיל (active)
- בדוק שההרשאות של ה-token כוללות `scenarios:read`

**שגיאה בהרצת סצנריו:**
- בדוק שהפרמטרים נכונים
- בדוק שההרשאות של ה-token כוללות `scenarios:run`
- בדוק את הלוגים של Make לפרטים נוספים

## משאבים נוספים

- [תיעוד Make MCP Server](https://developers.make.com/mcp-server)
- [Make API Documentation](https://www.make.com/en/api-documentation)
- [Model Context Protocol](https://modelcontextprotocol.io/)

## עדכונים

- **תאריך הגדרה**: 25 בינואר 2026
- **גרסת חבילה**: `@makehq/mcp-server` (מותקנת אוטומטית דרך npx)
- **Zone**: `eu1.make.com` (אירופה)
